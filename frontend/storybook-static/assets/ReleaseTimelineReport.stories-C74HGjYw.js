import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as i}from"./index-DQLiH3RP.js";import{r as g}from"./reportService-BqbW525N.js";import"./apiClient-CuU1bmnr.js";const x=()=>{const[o,f]=i.useState([]),[s,p]=i.useState(!0),[c,h]=i.useState(null),[a,j]=i.useState(""),m=i.useCallback(async(t,l)=>{try{p(!0);const d={};t&&(l||a)&&(d.year=l||a);const r=await g.getReleaseTimelineReport(d);f(r),h(null)}catch{h("Failed to load report")}finally{p(!1)}},[a]);return i.useEffect(()=>{m()},[m]),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Release Timeline Report"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Consolidated releases with start/end dates"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-x-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Timeline"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",placeholder:"Year",value:a,onChange:t=>j(t.target.value),"data-testid":"timeline-year",className:"border border-gray-300 rounded-md px-2 py-1 text-sm w-24"}),e.jsx("button",{title:s?"Please wait until data finishes loading":void 0,disabled:s,onClick:()=>m(!0),"data-testid":"timeline-apply",className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Apply"})]}),e.jsx("button",{title:s?"Please wait until data finishes loading":(o||[]).length===0?"No data to export":void 0,disabled:(o||[]).length===0&&!0,onClick:async()=>{const t={};a&&(t.year=a);const l=await g.exportReport("RELEASE_TIMELINE",t),d=URL.createObjectURL(l),r=document.createElement("a");r.href=d;const w=a?`_${a}`:"";r.download=`release-timeline${w}.xlsx`,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(d)},"data-testid":"timeline-report-export",className:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Export to Excel"})]})}),s&&e.jsx("div",{className:"px-6 py-12 text-center","data-testid":"timeline-report-loading",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}),c&&!s&&e.jsx("div",{className:"px-6 py-4","data-testid":"timeline-report-error",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 text-sm text-red-700",children:c})}),!s&&!c&&e.jsxs("table",{className:"min-w-full divide-y divide-gray-200","data-testid":"timeline-report-table",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Identifier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(o||[]).map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.identifier}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(t.startDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(t.endDate).toLocaleDateString()})]},t.identifier))})]})]})]})};x.__docgenInfo={description:"",methods:[],displayName:"ReleaseTimelineReportPage"};const S={title:"Reports/ReleaseTimelineReportPage",component:x},n={render:()=>e.jsx(x,{})};var u,y,b;n.parameters={...n.parameters,docs:{...(u=n.parameters)==null?void 0:u.docs,source:{originalSource:`{
  render: () => <ReleaseTimelineReportPage />
}`,...(b=(y=n.parameters)==null?void 0:y.docs)==null?void 0:b.source}}};const k=["Default"];export{n as Default,k as __namedExportsOrder,S as default};
